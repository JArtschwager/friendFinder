<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="./assets/css/style.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css?family=Berkshire+Swash|Lobster|Open+Sans" rel="stylesheet">
  <title>Friend finder</title>
</head>

<body>
  <!-- the header first make the whole top black and fixed-->
  <div class="parallax second-parallax">
    <!-- below is text over background image -->
    <div class="home-page-text">
      <h1 class="home-text">Take the Survey</h1>
    </div>
  </div>


  <div class="questions-parallax">
    <div class="container">
      <h1 class="header lead-body">First, Tell us a little about you</h1>
      <p class="paragraph-details">
        <h3>All fields below are manditory</h3>
      </p>
      <form role="form">
        <!-- form needsmethod/action? -->
        <h3> Full Name</h3>
        <div class="input-group mb-3">
          <input type="text" class="form-control" id="friend-name" aria-label="Default" aria-describedby="inputGroup-sizing-default">
        </div>
        <h3>FB Link to photo image</h3>
        <div class="input-group mb-3 spacer">
          <input type="text" class="form-control" id="friend-photo" aria-label="Default" aria-describedby="inputGroup-sizing-default">
        </div>

        <h3>Question 1</h3>
        <h4>I prefer city life, constant hussle and bussle and the people watching that involves</h4>
        <div class="input-group mb-3">
          <select class="custom-select" id="inputGroupSelect01">
            <option selected>select an option</option>
            <option value="1">1 (no way!)</option>
            <option value="2">2 </option>
            <option value="3">3 </option>
            <option value="4">4 </option>
            <option value="5">5 (strongly agree)</option>
          </select>
        </div>

        <h3>Question 2</h3>
        <h4>Hiking is a spiritual reset button that makes me peaceful and calm</h4>
        <div class="input-group mb-3">
          <select class="custom-select" id="inputGroupSelect02">
            <option selected>select an option</option>
            <option value="1">1 (no way!)</option>
            <option value="2">2 </option>
            <option value="3">3 </option>
            <option value="4">4 </option>
            <option value="5">5 (strongly agree)</option>
          </select>
        </div>

        <h3>Question 3</h3>
        <h4>When it comes to food, I'll try anything once. I stay clear of those franchiese places. Family owned is the way to
          go.
        </h4>
        <div class="input-group mb-3">
          <select class="custom-select" id="inputGroupSelect03">
            <option selected>select an option</option>
            <option value="1">1 (no way!)</option>
            <option value="2">2 </option>
            <option value="3">3 </option>
            <option value="4">4 </option>
            <option value="5">5 (strongly agree)</option>
          </select>
        </div>

        <h3>Question 4</h3>
        <h4>Excerise is a fun group activity! Yoga with the girls or rock climbing with the group is right up my alley!</h4>
        <div class="input-group mb-3">
          <select class="custom-select" id="inputGroupSelect04">
            <option selected>select an option</option>
            <option value="1">1 (no way!)</option>
            <option value="2">2 </option>
            <option value="3">3 </option>
            <option value="4">4 </option>
            <option value="5">5 (strongly agree)</option>
          </select>
        </div>

        <h3>Question 5</h3>
        <h4>I enjoy a drink in my hand and a dance floor with my name on it.</h4>
        <div class="input-group mb-3">
          <select class="custom-select" id="inputGroupSelect05">
            <option selected>select an option</option>
            <option value="1">1 (no way!)</option>
            <option value="2">2 </option>
            <option value="3">3 </option>
            <option value="4">4 </option>
            <option value="5">5 (strongly agree)</option>
          </select>
        </div>

        <h3>Question 6</h3>
        <h4>Netflix and chill is the only place you'll see me on a friday night</h4>
        <div class="input-group mb-3">
          <select class="custom-select" id="inputGroupSelect06">
            <option selected>select an option</option>
            <option value="1">1 (no way!)</option>
            <option value="2">2 </option>
            <option value="3">3 </option>
            <option value="4">4 </option>
            <option value="5">5 (strongly agree)</option>
          </select>
        </div>

        <h3>Question 7</h3>
        <h4>I'd rather be reading a book than socializing with others</h4>
        <div class="input-group mb-3">
          <select class="custom-select" id="inputGroupSelect07">
            <option selected>select an option</option>
            <option value="1">1 (no way!)</option>
            <option value="2">2 </option>
            <option value="3">3 </option>
            <option value="4">4 </option>
            <option value="5">5 (strongly agree)</option>
          </select>
        </div>

        <h3>Question 8</h3>
        <h4>The beach traffic is worth the day trip to soak up the sun.</h4>
        <div class="input-group mb-3">
          <select class="custom-select" id="inputGroupSelect08">
            <option selected>select an option</option>
            <option value="1">1 (no way!)</option>
            <option value="2">2 </option>
            <option value="3">3 </option>
            <option value="4">4 </option>
            <option value="5">5 (strongly agree)</option>
          </select>
        </div>

        <h3>Question 9</h3>
        <h4>Pools, lakes, and the ocean are my prefered way to cool off.</h4>
        <div class="input-group mb-3">
          <select class="custom-select" id="inputGroupSelect09">
            <option selected>select an option</option>
            <option value="1">1 (no way!)</option>
            <option value="2">2 </option>
            <option value="3">3 </option>
            <option value="4">4 </option>
            <option value="5">5 (strongly agree)</option>
          </select>
        </div>

        <h3>Question 10</h3>
        <h4>I'd rather be skying or doing other winter sports than be sweating on the beach.</h4>
        <div class="input-group mb-3">
          <select class="custom-select" id="inputGroupSelect10">
            <option selected>select an option</option>
            <option value="1">1 (no way!)</option>
            <option value="2">2 </option>
            <option value="3">3 </option>
            <option value="4">4 </option>
            <option value="5">5 (strongly agree)</option>
          </select>
        </div>
        <!-- Button trigger modal -->
        <div class="row">
          <button type="button" id="survey_submit" class="btn btn-style">
            Submit
          </button>
        </div>
      </form>
    </div>
  </div>
  </div>
  </div>


  <!-- Modal -->
  <div class="modal fade" id="resultModal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="ModalLabel">You've been matched!</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!-- insert html data here from jquery results.  need to use these to get a match complete to show. -->
          <div class="modal-results" id="match-name"></div>
          <div class="modal-results" id="match-picture"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary">continue</button>
          <!-- formerly the save changes button, -->
        </div>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <p class="copyright">Friend finder &copy; Jartschwager 2018 </p>
    </div>
  </footer>



  <!-- ask if this is supposed to be moved posting script to express server still need to bring in jquery-->
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
  <script type="text/javascript">
    // Our api recognizes the route (/api/tables)... and then runs the associated code (found in apiRoutes.js).
    // In this case the associated code "saves" the data to the survey.js file 
    $("#survey_submit").on("click", function (event) {
      event.preventDefault();

      // Here we grab the form elements
      var newFriend = {
        name: $("#friend-name").val().trim(),
        photo: $("#friend-photo").val().trim(),
        scores: [
          $("#inputGroupSelect01").val(),
          $("#inputGroupSelect02").val(),
          $("#inputGroupSelect03").val(),
          $("#inputGroupSelect04").val(),
          $("#inputGroupSelect05").val(),
          $("#inputGroupSelect06").val(),
          $("#inputGroupSelect07").val(),
          $("#inputGroupSelect08").val(),
          $("#inputGroupSelect09").val(),
          $("#inputGroupSelect10").val()
        ]
      };

      console.log(newFriend);

      $.post("/api/friends", newFriend, function (bestFriend) {

        if (bestFriend) {
          alert("Yay! You are officially finding a friend");
        } else {
          alert("nothing  to add");
        }

        // Clear the form when submitting
        $("#friend-name").val("");
        $("#friend-photo").val("");

        // var score arrary and then the values and each values in order into the array.
        //add ID's  see line 208
        $("#friend-score").val("");
        $("uuid").val("");
        // //new friend i smy current user.  //data is all friends. for loop over all the friends. for each friend, compare their scores to new friends scores. and for loop 0-9 is all the scores. 
        // #match-picture
        // #match-name

        //show modal of Best Friend
        $('#resultModal').modal('show');
        
        

          //save the result, store it to the new best friend variable. with id and score.best friend if it's betteter than the best then replace it.




      });

    });

    ///////////////// post side

    //getting code to display from the server.  sample is displayed in a table.  to be moved to modale.
    function PostNewFriend() {

      var currentURL = window.location.origin;

      $.ajax({
          url: currentURL + "/api/tables",
          method: "GET"
        })
        .then(function (friendData) {

          // Here we are logging the URL so we have access to it for troubleshooting
          console.log("------------------------------------");
          console.log("URL: " + currentURL + "/api/tables");
          console.log("------------------------------------");

          // Here we then log the NYTData to console, where it will show up as an object.
          console.log(friendData);
          console.log("------------------------------------");

          // Loop through and display each of the customers
          for (var i = 0; i < friendData.length; i++) {

            // Create the HTML Well (Section) and Add the table content for each reserved table
            var tableSection = $("<div>");
            tableSection.addClass("well");
            tableSection.attr("id", "tableWell-" + i + 1);
            $("#tableSection").append(tableSection);
            //above may have to be modal the table well?
            var friendNumber = i + 1;
            // Then display the remaining fields in the HTML (Section Name, Date, URL)
            $("#tableWell-" + i + 1).append("<h2><span class='label label-primary'>" + tableNumber + "</span> | " +
              friendData[i].customerID + "</h2>");
          }
        });
    }


    // // This function resets all of the data in our tables. This is intended to let you restart a demo.
    // function clearTable() {

    //   var currentURL = window.location.origin;
    //   $.ajax({ url: currentURL + "/api/clear", method: "POST" });

    // }

    // $("#clear").on("click", function() {
    //   alert("Clearing...");
    //   clearTable();

    //   // Refresh the page after data is cleared
    //   location.reload();

    // });


    // Run Queries!
    // ==========================================
    // BRIAN COMMENTED THIS OFF BECAUSE IT WAS ANNOYING DURING TESTING
    // PostNewFriend();

    // BRIAN COMMENTED THIS OFF BECAUSE IT WAS ANNOYING DURING TESTING
    //the modal js
    $('#resultModal').on('shown.bs.modal', function () {
      $('#myInput').trigger('focus')
    })
  </script>


</body>

</html>